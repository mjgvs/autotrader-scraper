scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage")
str(autotrader_df)
View(autotrader_df)
length(unique(autotrader_df$owners))
autotrader_df %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ owners, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage")
autotrader_df %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage and fuel type")
autotrader_df %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and fuel type")
autotrader_df_corolla <- read_csv("C:/Users/mjgva/Downloads/autotrader-df-corolla.csv",
col_types = cols(year = col_character(),
engine = col_character()))
str(autotrader_df_ioniq)
autotrader_df_ioniq <- read_csv("C:/Users/mjgva/Downloads/autotrader-df-ioniq.csv",
col_types = cols(year = col_character(),
engine = col_character()))
autotrader_df_corolla %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 6) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Toyota Corolla price by mileage, year and fuel type")
autotrader_df_corolla %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ owners, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and owners")
autotrader_df_corolla %>%
filter(!is.na(year),
!is.na(fuel),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 4) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Toyota Corolla price by mileage and year")
colnames(autotrader_df)
autotrader_df_ioniq %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and fuel type")
autotrader_df_ioniq %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage and year")
library(dplyr)
library(ggplot2)
library(readr)
library(scales)
autotrader_df_ioniq <- read_csv("C:/Users/mjgva/Downloads/autotrader-df-ioniq.csv",
col_types = cols(year = col_character(),
engine = col_character()))
autotrader_df_corolla <- read_csv("C:/Users/mjgva/Downloads/autotrader-df-corolla.csv",
col_types = cols(year = col_character(),
engine = col_character()))
autotrader_df_ioniq %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and fuel type")
autotrader_df_ioniq %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage and year")
autotrader_df_corolla %>%
filter(!is.na(year),
!is.na(fuel)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 2) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Toyota Corolla price by mileage, year and fuel type")
autotrader_df_corolla %>%
filter(!is.na(year),
!is.na(fuel),
fuel == "Petrol Hybrid") %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 4) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Toyota Corolla price by mileage and year")
View(autotrader_df_ioniq)
library(readr)
autotrader_df <- read_csv("~/projects/autotrader_scraper/autotrader-df.csv",
col_types = cols(engine = col_character()))
View(autotrader_df)
dim(autotrader_df)
autotrader_df %>%
count(model)
library(dplyr)
library(ggplot2)
library(readr)
library(scales)
library(readr)
autotrader_df %>%
count(model)
autotrader_df %>%
count(model, sort=TRUE)
autotrader_df %>%
count(model, fuel, sort=TRUE)
autotrader_df %>%
filter(fuel %in% c("Petrol Hybrid", "Petrol Plug-in Hybrid", "Electric")) %>%
count(model, fuel, sort=TRUE)
models <- autotrader_df %>%
filter(fuel %in% c("Petrol Hybrid", "Petrol Plug-in Hybrid", "Electric")) %>%
count(model, fuel, sort=TRUE) %>% .$model
models
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and fuel type")
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
filter(fuel %in% c("Petrol Hybrid", "Petrol Plug-in Hybrid", "Electric")) %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ fuel, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq price by mileage, year and fuel type")
autotrader_df %>%
filter(fuel %in% c("Petrol Hybrid")) %>%
count(model, fuel, sort=TRUE)
models_hev <- autotrader_df %>%
filter(fuel %in% c("Petrol Hybrid")) %>%
count(model, fuel, sort=TRUE) %>%
.$model
models_hev
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage and year")
autotrader_df %>%
filter(model %in% models_hev) %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
models_hev
autotrader_df %>%
filter(model %in% models_hev) %>%
filter(fuel = "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(distance < 20) %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(distance < 10) %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(distance < 10) %>%
filter(year >= 2019) %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
library(dplyr)
library(ggplot2)
library(readr)
library(scales)
library(readr)
autotrader_df <- read_csv("~/projects/autotrader_scraper/autotrader-df.csv",
col_types = cols(engine = col_character()))
View(autotrader_df)
autotrader_df %>%
filter(model == "Hyundai Ioniq")
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle)
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle) %>%
View()
autotrader_df %>%
mutate(premium = grepl("premium", subtitle)) %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle) %>%
View()
autotrader_df %>%
mutate(premium = grepl("premium", subtitle)) %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle, premium) %>%
View()
?tolower
autotrader_df %>%
mutate(premium = grepl("premium", tolower(subtitle))) %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle, premium) %>%
View()
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
filter(model == "Hyundai Ioniq") %>%
count(subtitle, connect, premium, premium_se) %>%
View()
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
filter(model == "Hyundai Ioniq") %>%
mutate(sum = connect+premium+premium_se)
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
filter(model == "Hyundai Ioniq") %>%
mutate(sum = connect+premium+premium_se) %>%
count(sum)
autotrader_df %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
models_hev <- autotrader_df %>%
filter(fuel %in% c("Petrol Hybrid")) %>%
count(model, fuel, sort=TRUE) %>%
.$model
autotrader_df %>%
filter(model %in% models_hev) %>%
filter(fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
filter(!is.na(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ model, ncol = 3) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Car price by mileage, year and model type")
autotrader_df %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
ggplot(aes(y = price, x = mileage, color = year)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage and year")
?pivot_longer
??pivot_longer
?gather
??gather
library(tidyr)
install.packages("tidyr")
library(tidyr)
?pivot_loner
?pivot_longer
relig_income
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
fuel == "Petrol Hybrid")
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
fuel == "Petrol Hybrid")
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
ggplot(aes(y = price, x = mileage, color = trim)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage, trim and year")
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
year <= 2021,
fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
ggplot(aes(y = price, x = mileage, color = trim)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage, trim and year")
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
year <= 2021,
fuel == "Petrol Hybrid") %>% arrange(desc(price))
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
year <= 2021,
fuel == "Petrol Hybrid") %>% arrange(desc(price)) %>% View()
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
year <= 2021,
fuel == "Petrol Hybrid") %>% select(link, subtitle, trim) %>% View()
autotrader_df %>%
mutate(connect = grepl("connect", tolower(subtitle))) %>%
mutate(premium = grepl("premium", tolower(subtitle)) & !grepl("se", tolower(subtitle))) %>%
mutate(premium_se = grepl("premium", tolower(subtitle)) & grepl("se ", tolower(subtitle))) %>%
# slightly round-about way to long-format the trim, any better way I can think of?
pivot_longer(cols = c(connect, premium, premium_se), names_to = "trim", values_to = "value") %>%
filter(value == TRUE) %>%
select(-value) %>%
filter(model == "Hyundai Ioniq") %>%
filter(!is.na(year),
year <= 2021,
fuel == "Petrol Hybrid") %>%
mutate(year = as.character(year)) %>%
ggplot(aes(y = price, x = mileage, color = trim)) +
geom_point() +
geom_smooth(method = "lm", se = FALSE) +  # Add a trend line
facet_wrap( ~ year, ncol = 5) +
scale_y_continuous(labels = comma, name = "Price (GBP)") +
scale_x_continuous(labels = comma, name = "Mileage (miles)") +
labs(title = "Hyundai Ioniq (HEV) price by mileage, trim and year")
